<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Add / Top-Up Stock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/addStock.css">

  <!-- ‚úÖ PWA MANIFEST -->
  <link rel="manifest" href="/manifest.json">

  <!-- Optional but recommended -->
  <meta name="theme-color" content="#C62828">
</head>

<body>
<!-- üîê Security & permissions: run before page logic -->
<script src="./js/session-check.js"></script>
<script src="./js/permissions-check.js"></script>

<!-- ============================
     UNIFIED FIRST-AID NAV BAR
============================ -->
<nav class="nav">
  <a class="nav-link-left" href="index.html">Dashboard</a>
  <span class="nav-title">Add / Top-Up Stock</span>
  <a class="nav-link-right" href="inventoryLogs.html">Logs</a>
</nav>

<main class="page">

  <div class="card">
    <form id="addStockForm">

      <!-- ITEM DETAILS -->
      <h2 class="section-title">üì¶ Item Details</h2>

      <div class="field">
        <label>Select Existing Item</label>
        <select id="itemNameSelect" class="input">
          <option value="">Loading‚Ä¶</option>
        </select>
      </div>

      <div class="field">
        <label>Or Enter New Item Name</label>
        <input id="itemName" class="input" type="text" placeholder="e.g. Gloves, Hydrogen Peroxide">
      </div>

      <div class="field">
        <label>Quantity to Add</label>
        <input id="itemQty" class="input" type="number" min="1" placeholder="10" required>
      </div>

      <!-- LOCATION -->
      <h2 class="section-title">üìç Stock Location</h2>

      <div class="field">
        <label>Select Location</label>
        <select id="locationSelect" class="input">
          <option value="">Loading‚Ä¶</option>
        </select>
      </div>

      <button type="button" id="addNewLocationBtn" class="btn blue small">
        ‚ûï Add New Location
      </button>

      <!-- ADVANCED SETTINGS -->
      <h2 class="section-title">‚öôÔ∏è Advanced Settings</h2>

      <div id="advToggle" class="adv-toggle">
        Show Advanced Settings ‚ñº
      </div>

      <div id="advSection" class="adv-panel hidden">
        <div class="field">
          <label>Default PAR (Reorder Level)</label>
          <input id="parDefault" class="input" type="number" min="0" placeholder="Auto if empty">
        </div>

        <div class="field">
          <label>Default MIN</label>
          <input id="minDefault" class="input" type="number" min="0" placeholder="Auto if empty">
        </div>

        <div class="field">
          <label>Default MAX</label>
          <input id="maxDefault" class="input" type="number" min="0" placeholder="Auto if empty">
        </div>
      </div>

      <button type="submit" class="btn primary full">Save Stock</button>

    </form>
  </div>

</main>

<!-- Page logic: load after DOM -->
<script type="module" src="./js/addStock.js"></script>

<!-- ‚úÖ SERVICE WORKER REGISTRATION -->
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .catch(err => console.error("SW registration failed:", err));
  }
</script>

</body>
</html>
